{
  "id": "TestToolAgent_b260f141-1de8-4397-8634-70bde1d32008",
  "datetime": "2025-05-17 20:51:09",
  "llm_model_retriever_embedding": "text-embedding-3-small",
  "llm_model_sql_generator": "o4-mini-2025-04-16",
  "llm_model_sql_generator_enhanced": "o4-mini-2025-04-16",
  "time_in_seconds_total": 107.294462,
  "time_in_seconds_retriever": 0.364553,
  "time_in_seconds_sql_generation": 46.959274,
  "time_in_seconds_sql_generation_enhanced": 59.926876,
  "tokens_total_retriever_embedding": 500,
  "tokens_total_sql_generation": 19171,
  "tokens_prompt_sql_generation": 13676,
  "tokens_completion_sql_generation": 5495,
  "tokens_total_sql_generation_enhanced": 24018,
  "tokens_prompt_sql_generation_enhanced": 16479,
  "tokens_completion_sql_generation_enhanced": 7539,
  "tokens_total_tool": 43689,
  "total_cost_retriever_embedding_in_dollars": 1e-05,
  "total_cost_sql_generation_in_dollars": 0.03922160000000001,
  "total_cost_sql_generation_enhanced_in_dollars": 0.051298500000000004,
  "total_cost_tool_in_dollars": 0.09053010000000002,
  "prompt_user_needs": "Objetivo: Generar un log de eventos que involucre todo el módulo de urgencias, para trazar los eventos generados en el servicio de extremo a extremo. Grupo de pacientes: Toda la población en general. Identificadores únicos: id del paciente, id de estancia en urgencias, id de estancia hospitalaria (si disponible), id de intervención quirúrgica (si disponible). Eventos a capturar: 1. Llegada del paciente de urgencias (Entrada a Urgencias (ED)), 2. Alta del paciente (Salida de Urgencias (ED)), 3. Triaje del paciente (Triaje en Urgencias (ED)), 4. Toma de constantes vitales (Toma de Constantes Vitales), 5. Entrevista de conciliación de medicamentos (Conciliación de Medicamentos), 6. Dispensación de medicamentos (Dispensación de Medicamentos), 7. Pruebas de laboratorio (Pruebas de Laboratorio), 8. Pruebas radiológicas (Pruebas Radiológicas). Atributos a registrar: - Llegada del paciente: medio de llegada, género, edad, y otros campos disponibles. - Alta del paciente: motivo de alta, secuencia de códigos de diagnósticos, descripciones y versiones de codificación. - Triaje: nivel de triaje, tomas de constantes vitales realizadas, y campos de texto libre. - Toma de constantes vitales: todas las tomas de constantes vitales. - Conciliación de medicamentos: todos los campos posibles. - Dispensación de medicamentos: todos los campos posibles. - Pruebas de laboratorio: nombre de tipo de prueba. - Pruebas radiológicas: nombre de tipo de prueba. Validación de datos: - 'Llegada a Urgencias (ED)' < 'Alta de Urgencias (ED)' - 'Toma de Constantes Vitales' <= 'Alta de Urgencias (ED)' - 'Dispensación de Medicamentos' <= 'Alta de Urgencias (ED)' - 'Conciliación de Medicamentos' <= 'Alta de Urgencias (ED)' Orden de visualización: Ordenar por id de paciente ascendente y por marca de tiempo del evento ascendente.",
  "retriever_score_limit": 0.5,
  "retriever_score_count_pass": 6,
  "retriever_pass_summary": [
    {
      "score": 0.7022557,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "edstays"
    },
    {
      "score": 0.6972975,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "vitalsign"
    },
    {
      "score": 0.68056476,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "triage"
    },
    {
      "score": 0.66924953,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "diagnosis"
    },
    {
      "score": 0.6473727,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "pyxis"
    },
    {
      "score": 0.6137214,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "medrecon"
    }
  ],
  "retriever_raw_summary": [
    {
      "score": 0.7022557,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "edstays"
    },
    {
      "score": 0.6972975,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "vitalsign"
    },
    {
      "score": 0.68056476,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "triage"
    },
    {
      "score": 0.66924953,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "diagnosis"
    },
    {
      "score": 0.6473727,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "pyxis"
    },
    {
      "score": 0.6137214,
      "module_id": "module_ed",
      "schema_db": "module_ed",
      "table_name": "medrecon"
    }
  ],
  "prompt_sql_generator": "\n            Eres un experto en SQL hospitalario. Genera un log de eventos en formato SQL según las reglas siguientes.\n\n            # Necesidades del usuario:\n            Consulta del usuario: Objetivo: Generar un log de eventos que involucre todo el módulo de urgencias, para trazar los eventos generados en el servicio de extremo a extremo. Grupo de pacientes: Toda la población en general. Identificadores únicos: id del paciente, id de estancia en urgencias, id de estancia hospitalaria (si disponible), id de intervención quirúrgica (si disponible). Eventos a capturar: 1. Llegada del paciente de urgencias (Entrada a Urgencias (ED)), 2. Alta del paciente (Salida de Urgencias (ED)), 3. Triaje del paciente (Triaje en Urgencias (ED)), 4. Toma de constantes vitales (Toma de Constantes Vitales), 5. Entrevista de conciliación de medicamentos (Conciliación de Medicamentos), 6. Dispensación de medicamentos (Dispensación de Medicamentos), 7. Pruebas de laboratorio (Pruebas de Laboratorio), 8. Pruebas radiológicas (Pruebas Radiológicas). Atributos a registrar: - Llegada del paciente: medio de llegada, género, edad, y otros campos disponibles. - Alta del paciente: motivo de alta, secuencia de códigos de diagnósticos, descripciones y versiones de codificación. - Triaje: nivel de triaje, tomas de constantes vitales realizadas, y campos de texto libre. - Toma de constantes vitales: todas las tomas de constantes vitales. - Conciliación de medicamentos: todos los campos posibles. - Dispensación de medicamentos: todos los campos posibles. - Pruebas de laboratorio: nombre de tipo de prueba. - Pruebas radiológicas: nombre de tipo de prueba. Validación de datos: - 'Llegada a Urgencias (ED)' < 'Alta de Urgencias (ED)' - 'Toma de Constantes Vitales' <= 'Alta de Urgencias (ED)' - 'Dispensación de Medicamentos' <= 'Alta de Urgencias (ED)' - 'Conciliación de Medicamentos' <= 'Alta de Urgencias (ED)' Orden de visualización: Ordenar por id de paciente ascendente y por marca de tiempo del evento ascendente.\n\n            # Contexto del esquema:\n            [{'score': 0.7022557, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'edstays', 'definition': {'english': 'The edstays table is the primary tracking table for emergency department visits. It provides the time the patient entered the emergency department and the time they left the emergency department.', 'spanish': 'La tabla edstays es la tabla principal de registro para las visitas al servicio de urgencias. Proporciona la hora en la que el paciente ingresó al servicio de urgencias y la hora en la que salió.'}, 'purpose': {'english': 'Track patient admissions to the emergency department.', 'spanish': 'Rastrear las admisiones de pacientes en el servicio de urgencias.'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'subject_id is a unique identifier which specifies an individual patient. Any rows associated with a single subject_id pertain to the same individual.', 'spanish': 'subject_id es un identificador único que especifica un paciente individual. Todas las filas asociadas a un único subject_id pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'hadm_id', 'type': 'INTEGER', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'If the patient was admitted to the hospital after their ED stay, hadm_id will contain the hospital identifier (ranges from 2000000 to 2999999). The hadm_id may be used to link the ED stay with the hospitalization in corporative database. If hadm_id is NULL, the patient was not admitted to the hospital after their ED stay.', 'spanish': 'Si el paciente fue admitido en el hospital después de su estancia en urgencias, hadm_id contendrá el identificador del hospital (rango de 2000000 a 2999999). hadm_id puede usarse para vincular la estancia en urgencias con la hospitalización en la base de datos corporativa. Si hadm_id es NULL, el paciente no fue admitido en el hospital después de su estancia en urgencias.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': True, 'is_fk': False, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica de forma única una única estancia en el servicio de urgencias para un único paciente.'}, 'link_to': [], 'link_from': [{'schema': 'module_ed', 'table': 'pyxis', 'column': 'stay_id'}, {'schema': 'module_ed', 'table': 'diagnosis', 'column': 'stay_id'}, {'schema': 'module_ed', 'table': 'medrecon', 'column': 'stay_id'}, {'schema': 'module_ed', 'table': 'triage', 'column': 'stay_id'}, {'schema': 'module_ed', 'table': 'vitalsign', 'column': 'stay_id'}], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'intime', 'type': 'TIMESTAMP', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The admission datetime (intime) of the given emergency department stay.', 'spanish': 'La fecha y hora del ingreso (intime) de la estancia en el servicio de urgencias.'}, 'link_to': [], 'link_from': [], 'range': {'min': '2110-01-11 01:45:00', 'max': '2212-04-05 23:23:00'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'outtime', 'type': 'TIMESTAMP', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The discharge datetime (outtime) of the given emergency department stay.', 'spanish': 'La fecha y hora de egreso (outtime) de la estancia en el servicio de urgencias.'}, 'link_to': [], 'link_from': [], 'range': {'min': '2110-01-11 07:04:00', 'max': '2212-04-06 14:20:00'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'gender', 'type': 'VARCHAR(1)', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s administrative gender as documented in the hospital system.', 'spanish': 'El género administrativo del paciente según consta en los registros del sistema hospitalario.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 2}], 'most_frequent_values': [{'value': 'F', 'count': 229898}, {'value': 'M', 'count': 195189}]}, {'name': 'race', 'type': 'VARCHAR(60)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s self-reported race. Race is aggregated into higher level categories for very small groups. As of corporative database v2.1, there were 33 unique categories for race.', 'spanish': 'La raza autoinformada del paciente. La raza se agrupa en categorías de nivel superior para grupos muy pequeños. A partir de la base de datos corporativa v2.1, había 33 categorías únicas para la raza.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 33}], 'most_frequent_values': [{'value': 'WHITE', 'count': 228123}, {'value': 'BLACK/AFRICAN AMERICAN', 'count': 76798}, {'value': 'OTHER', 'count': 20752}, {'value': 'HISPANIC/LATINO - PUERTO RICAN', 'count': 14036}, {'value': 'WHITE - OTHER EUROPEAN', 'count': 8992}, {'value': 'HISPANIC/LATINO - DOMINICAN', 'count': 8330}, {'value': 'BLACK/CAPE VERDEAN', 'count': 7638}, {'value': 'ASIAN - CHINESE', 'count': 7348}, {'value': 'ASIAN', 'count': 7294}, {'value': 'UNKNOWN', 'count': 7083}]}, {'name': 'arrival_transport', 'type': 'VARCHAR(50)', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The method through which the individual arrived at the ED. Possible entries include: WALK IN, AMBULANCE, UNKNOWN, OTHER, HELICOPTER.', 'spanish': 'El método a través del cual el paciente llegó al servicio de urgencias. Las entradas posibles incluyen: WALK IN, AMBULANCE, UNKNOWN, OTHER, HELICOPTER.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 5}], 'most_frequent_values': [{'value': 'WALK IN', 'count': 251849}, {'value': 'AMBULANCE', 'count': 155752}, {'value': 'UNKNOWN', 'count': 15352}, {'value': 'OTHER', 'count': 1266}, {'value': 'HELICOPTER', 'count': 868}]}, {'name': 'disposition', 'type': 'VARCHAR(255)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The method through which the individual left the ED. Possible non-null methods include: HOME, ADMITTED, TRANSFER, LEFT WITHOUT BEING SEEN, OTHER, LEFT AGAINST MEDICAL ADVICE, ELOPED, EXPIRED.', 'spanish': 'El método a través del cual el individuo salió del servicio de urgencias. Las posibles opciones, excluyendo valores nulos, incluyen: HOME, ADMITTED, TRANSFER, LEFT WITHOUT BEING SEEN, OTHER, LEFT AGAINST MEDICAL ADVICE, ELOPED, EXPIRED.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 8}], 'most_frequent_values': [{'value': 'HOME', 'count': 241632}, {'value': 'ADMITTED', 'count': 158010}, {'value': 'TRANSFER', 'count': 7025}, {'value': 'LEFT WITHOUT BEING SEEN', 'count': 6155}, {'value': 'ELOPED', 'count': 5710}, {'value': 'OTHER', 'count': 4297}, {'value': 'LEFT AGAINST MEDICAL ADVICE', 'count': 1881}, {'value': 'EXPIRED', 'count': 377}]}]}}, {'score': 0.6972975, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'vitalsign', 'definition': {'english': 'Patients admitted to the emergency department have routine vital signs taken every 1-4 hours. These vital signs are stored in the vitalsign table.', 'spanish': 'A los pacientes ingresados en el servicio de urgencias, se les toman los signos vitales de manera rutinaria cada 1-4 horas. Estos signos vitales se almacenan en la tabla vitalsign.'}, 'purpose': {'english': 'Provides nurse documented vital signs.', 'spanish': 'Proporciona los signos vitales registrados por el personal de enfermería.'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': '`subject_id` is a unique identifier which specifies an individual patient. Any rows associated with a single `subject_id` pertain to the same individual.', 'spanish': '`subject_id` es un identificador único que especifica a un paciente individual. Todas las filas asociadas a un único `subject_id` pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': True, 'is_fk': True, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica de forma única una única estancia en el servicio de urgencias para un paciente.'}, 'link_to': [{'schema': 'module_ed', 'table': 'edstays', 'column': 'stay_id'}], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'charttime', 'type': 'TIMESTAMP', 'nullable': False, 'is_pk': True, 'is_fk': False, 'description': {'english': 'The time at which the vital signs were charted.', 'spanish': 'La hora en la que se registraron los signos vitales.'}, 'link_to': [], 'link_from': [], 'range': {'min': '2110-01-11 01:49:00', 'max': '2212-04-06 12:20:00'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'temperature', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's temperature in degrees Farenheit. Some temperatures may be incorrectly documented as Celsius.\", 'spanish': 'La temperatura del paciente en grados Fahrenheit. Algunas temperaturas pueden estar incorrectamente documentadas en Celsius.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '989.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'heartrate', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's heart rate in beats per minute.\", 'spanish': 'La frecuencia cardíaca del paciente en latidos por minuto.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '1109.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'resprate', 'type': 'NUMERIC(10,4)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's respiratory rate in breaths per minute.\", 'spanish': 'La frecuencia respiratoria del paciente en respiraciones por minuto.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '94452.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'o2sat', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's oxygen saturation measured as a percentage.\", 'spanish': 'La saturación de oxígeno del paciente medida como un porcentaje.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '9997.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'sbp', 'type': 'INTEGER', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's systolic blood pressure measured in millimetres of mercury (mmHg).\", 'spanish': 'La presión arterial sistólica del paciente medida en milímetros de mercurio (mmHg).'}, 'link_to': [], 'link_from': [], 'range': {'min': '0', 'max': '1234'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'dbp', 'type': 'INTEGER', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's diastolic blood pressure measured in millimetres of mercury (mmHg).\", 'spanish': 'La presión arterial diastólica del paciente medida en milímetros de mercurio (mmHg).'}, 'link_to': [], 'link_from': [], 'range': {'min': '0', 'max': '97100'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'rhythm', 'type': 'VARCHAR', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's heart rhythm.\", 'spanish': 'El ritmo cardíaco del paciente.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 1171}], 'most_frequent_values': [{'value': 'Sinus Rhythm', 'count': 18894}, {'value': 'Normal Sinus Rhythm', 'count': 12316}, {'value': 'Atrial Fibrillation', 'count': 5238}, {'value': 'Sinus Tachycardia', 'count': 5133}, {'value': 'Sinus Bradycardia', 'count': 3246}, {'value': 'sr', 'count': 3020}, {'value': 'Paced Rhythm', 'count': 1777}, {'value': 'nsr', 'count': 1175}, {'value': 'SR', 'count': 1040}, {'value': 'afib', 'count': 870}]}, {'name': 'pain', 'type': 'VARCHAR', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's self-reported level of pain on a scale from 0-10. The pain is documented as free-text and may contain non-numeric entries.\", 'spanish': 'El nivel de dolor auto reportado por el paciente en una escala de 0 a 10. El dolor se documenta como texto libre y puede contener entradas no numéricas.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 3144}], 'most_frequent_values': [{'value': '0', 'count': 560092}, {'value': '5', 'count': 62116}, {'value': '8', 'count': 57789}, {'value': '4', 'count': 51170}, {'value': '2', 'count': 48236}, {'value': '7', 'count': 46546}, {'value': '6', 'count': 46274}, {'value': '3', 'count': 44930}, {'value': '10', 'count': 42841}, {'value': '9', 'count': 24075}]}]}}, {'score': 0.68056476, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'triage', 'definition': {'english': 'The triage table contains information about the patient when they were first triaged in the emergency department. Patients are assessed at triage by a single care provider and asked a series of questions to assess their current health status. Their vital signs are measured and a level of acuity is assigned. Based on the level of acuity, the patient either waits in the waiting room for later attention, or is prioritized for immediate care. All fields in triage were originally free-text. For deidentification purposes, the vital sign and pain fields were converted into a numeric value. As a result, a small number of NULL values were introduced for text entries.', 'spanish': 'La tabla triage contiene información sobre el paciente cuando fue evaluado por primera vez a su llegada al servicio de urgencias. Los pacientes son evaluados en triaje por un único profesional sanitario y se les realizan una serie de preguntas para evaluar su estado de salud actual. Se miden sus signos vitales y se asigna un nivel de prioridad (nivel de triaje). En función del nivel de triaje, el paciente espera en la sala de espera hasta recibir atención sanitaria o se le da atención inmediata. Todos los campos en triage fueron originalmente de texto libre. Por razones de desidentificación, los campos de signos vitales y dolor se convirtieron en valores numéricos, lo que introdujo un pequeño número de valores NULL en las entradas de texto.'}, 'purpose': {'english': 'Store information collected on triage to the emergency department. This table does not include timestamps. If temporal data needs to be imputed, it should be calculated using the intime field from the edstays table as a reference, using the formula: (intime + 1 second).', 'spanish': 'Almacena la información recopilada durante el triaje en el servicio de urgencias. Esta tabla no dispone de `timestamps`. Si se necesita imputar `timestamps`, su cálculo debe hacerse tomando como referencia el campo `intime` ubicado enla tabla `edstays` mediante el cálculo: (`intime` + 1 segundo.)'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'subject_id is a unique identifier which specifies an individual patient. Any rows associated with a single subject_id pertain to the same individual.', 'spanish': 'subject_id es un identificador único que hace referencia a un paciente individual. Todas las filas asociadas a un único subject_id pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': True, 'is_fk': True, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica una única estancia en el servicio de urgencias para un paciente.'}, 'link_to': [{'schema': 'module_ed', 'table': 'edstays', 'column': 'stay_id'}], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'temperature', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s temperature in degrees Farenheit. Some temperatures may be incorrectly documented as Celsius.', 'spanish': 'La temperatura del paciente, por defecto está en grados Fahrenheit. Algunas temperaturas pueden estar incorrectamente regisradas en Celsius.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.1000', 'max': '986.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'heartrate', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s heart rate in beats per minute.', 'spanish': 'La frecuencia cardíaca del paciente en latidos por minuto.'}, 'link_to': [], 'link_from': [], 'range': {'min': '1.0000', 'max': '1228.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'resprate', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s respiratory rate in breaths per minute.', 'spanish': 'La frecuencia respiratoria del paciente en respiraciones por minuto.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '1820.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'o2sat', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s peripheral oxygen saturation as a percentage.', 'spanish': 'La saturación periférica de oxígeno del paciente como porcentaje.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '9322.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'sbp', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s systolic blood pressure, measured in millimetres of mercury (mmHg).', 'spanish': 'La presión arterial sistólica del paciente, medida en milímetros de mercurio (mmHg).'}, 'link_to': [], 'link_from': [], 'range': {'min': '1.0000', 'max': '151103.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'dbp', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s diastolic blood pressure, measured in millimetres of mercury (mmHg).', 'spanish': 'La presión arterial diastólica del paciente, medida en milímetros de mercurio (mmHg).'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '661672.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'pain', 'type': 'VARCHAR', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The level of pain self-reported by the patient, on a scale of 0-10.', 'spanish': 'El nivel de dolor auto reportado por el paciente, en una escala de 0 a 10.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 850}], 'most_frequent_values': [{'value': '0', 'count': 140719}, {'value': '8', 'count': 41730}, {'value': '10', 'count': 40914}, {'value': '7', 'count': 31423}, {'value': '5', 'count': 29210}, {'value': '6', 'count': 25206}, {'value': '9', 'count': 20210}, {'value': '4', 'count': 19721}, {'value': '3', 'count': 16115}, {'value': '2', 'count': 13903}]}, {'name': 'acuity', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'An order of priority based upon acuity utilizing the Emergency Severity Index (ESI) Five Level triage system. This priority is assigned by a registered nurse. Level 1 is the highest priority, while level 5 is the lowest priority.', 'spanish': 'Un orden de prioridad basado en el nivel de triaje utilizando el sistema de cinco niveles del Índice de Severidad de Emergencias (ESI). Esta prioridad es asignada por un profesional de enfermería. El nivel 1 es la mayor prioridad o gravedad, mientras que el nivel 5 es la menor prioridad o gravedad.'}, 'link_to': [], 'link_from': [], 'range': {'min': '1.0000', 'max': '5.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'chiefcomplaint', 'type': 'VARCHAR(255)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'A deidentified free-text description of the patient’s chief complaint.', 'spanish': 'Una descripción de texto libre desidentificada de la queja principal del paciente.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 60407}], 'most_frequent_values': [{'value': 'Chest pain', 'count': 11301}, {'value': 'Abd pain', 'count': 10771}, {'value': 'Dyspnea', 'count': 6003}, {'value': 's/p Fall', 'count': 4965}, {'value': 'ABD PAIN', 'count': 4957}, {'value': 'SI', 'count': 4926}, {'value': 'ETOH', 'count': 4679}, {'value': 'Wound eval', 'count': 4509}, {'value': 'Headache', 'count': 3828}, {'value': 'Back pain', 'count': 3166}]}]}}, {'score': 0.66924953, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'diagnosis', 'definition': {'english': 'The diagnosis table provides billed diagnoses for patients. Diagnoses are determined after discharge from the emergency department.', 'spanish': 'La tabla diagnosis provee diagnósticos facturados para los pacientes. Los diagnósticos se determinan después del alta del servicio de urgencias.'}, 'purpose': {'english': 'Track patient admissions to the emergency department.', 'spanish': 'Rastrear las admisiones de pacientes en el servicio de urgencias.'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'subject_id is a unique identifier which specifies an individual patient. Any rows associated with a single subject_id pertain to the same individual.', 'spanish': 'subject_id es un identificador único que hace referencia a un paciente individual. Todas las filas asociadas a un único subject_id pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': True, 'is_fk': True, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica de forma única una única estancia en el servicio de urgencias para un paciente.'}, 'link_to': [{'schema': 'module_ed', 'table': 'edstays', 'column': 'stay_id'}], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'seq_num', 'type': 'INTEGER', 'nullable': False, 'is_pk': True, 'is_fk': False, 'description': {'english': 'A pseudo-priority for the diagnosis. A seq_num of 1 usually indicates a “primary” diagnosis, but accurately assessing the priority for patients with multiple diagnoses is challenging.', 'spanish': 'Una pseudo-prioridad para el diagnóstico. Un seq_num de 1 normalmente indica el diagnóstico principal.'}, 'link_to': [], 'link_from': [], 'range': {'min': '1', 'max': '9'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'icd_code', 'type': 'VARCHAR(8)', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'A coded diagnosis using the International Classification of Diseases (ICD) ontology.', 'spanish': 'Un diagnóstico codificado utilizando la Clasificación Internacional de Enfermedades (ICD).'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 13199}], 'most_frequent_values': [{'value': '4019', 'count': 26816}, {'value': 'I10', 'count': 21264}, {'value': 'R079', 'count': 13016}, {'value': '78650', 'count': 12398}, {'value': '25000', 'count': 12026}, {'value': 'R109', 'count': 10504}, {'value': 'E119', 'count': 8801}, {'value': '78909', 'count': 8704}, {'value': 'W1830XA', 'count': 7817}, {'value': 'E8889', 'count': 7085}]}, {'name': 'icd_version', 'type': 'SMALLINT', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The version of the ICD system used; either 9 indicating ICD-9 or 10 indicating ICD-10. The ontologies for these two systems differ, and therefore the meaning of the icd_code will depend on the icd_version.', 'spanish': 'La versión del sistema ICD utilizado; puede ser 9, que indica ICD-9, o 10, que indica ICD-10. El significado de icd_code dependerá de icd_version.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'icd_title', 'type': 'VARCHAR', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The textual description of the diagnosis.', 'spanish': 'La descripción textual del diagnóstico.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 13172}], 'most_frequent_values': [{'value': 'HYPERTENSION NOS', 'count': 26816}, {'value': 'Essential (primary) hypertension', 'count': 21264}, {'value': 'Chest pain, unspecified', 'count': 13016}, {'value': 'CHEST PAIN NOS', 'count': 12398}, {'value': 'DIABETES UNCOMPL ADULT', 'count': 12026}, {'value': 'Unspecified abdominal pain', 'count': 10504}, {'value': 'Type 2 diabetes mellitus without complications', 'count': 8801}, {'value': 'ABDOMINAL PAIN OTHER SPECIED', 'count': 8704}, {'value': 'Fall on same level, unspecified, initial encounter', 'count': 7817}, {'value': 'UNSPECIFIED FALL', 'count': 7081}]}]}}, {'score': 0.6473727, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'pyxis', 'definition': {'english': 'The pyxis table provides information for medicine dispensations made via the Pyxis system. Note that as the same medication may have multiple gsn values, each row does not necessarily indicate a unique dispensation. The med_rn column allows for subselecting to individual dispensations.', 'spanish': 'La tabla pyxis provee información sobre las dispensaciones de medicamentos realizadas a través del sistema Pyxis. Tenga en cuenta que, dado que el mismo medicamento puede tener múltiples valores de gsn, cada fila no necesariamente indica una dispensación única. La columna med_rn permite seleccionar subgrupos de dispensaciones individuales.'}, 'purpose': {'english': 'Track medicine administrations.', 'spanish': 'Rastrear las administraciones de medicamentos.'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'subject_id is a unique identifier which specifies an individual patient. Any rows associated with a single subject_id pertain to the same individual.', 'spanish': 'subject_id es un identificador único que hace referencia a un paciente individual. Todas las filas asociadas a un único subject_id pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': True, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica una única estancia en el servicio de urgencias para un paciente.'}, 'link_to': [{'schema': 'module_ed', 'table': 'edstays', 'column': 'stay_id'}], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'charttime', 'type': 'TIMESTAMP', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The time at which the medication was charted, which is the closest approximation to the time the medication was administered.', 'spanish': 'La hora en la que se registró la medicación, que es la aproximación más cercana al momento en que se administró el medicamento.'}, 'link_to': [], 'link_from': [], 'range': {'min': '2110-01-11 05:21:00', 'max': '2212-04-06 07:54:00'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'med_rn', 'type': 'SMALLINT', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'A row number for the medicine used to group single dispensations.', 'spanish': 'Un número de fila para el medicamento utilizado para agrupar dispensaciones individuales.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'name', 'type': 'VARCHAR(255)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The name of the medicine.', 'spanish': 'El nombre del medicamento.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 1102}], 'most_frequent_values': [{'value': 'Ondansetron', 'count': 84890}, {'value': 'Acetaminophen', 'count': 45740}, {'value': 'Lorazepam', 'count': 43798}, {'value': 'Ondansetron 4mg/2mL 2mL VIAL', 'count': 41162}, {'value': 'Morphine Sulfate', 'count': 39854}, {'value': 'HYDROmorphone (Dilaudid)', 'count': 37616}, {'value': 'Morphine', 'count': 29855}, {'value': 'Vancomycin', 'count': 27226}, {'value': 'Acetaminophen 500mg TAB', 'count': 26746}, {'value': 'Morphine Sulfat 4mg/1mL 1mL VIAL', 'count': 26157}]}, {'name': 'gsn_rn', 'type': 'SMALLINT', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'As a medicine may be a member of multiple groups in the GSN ontology, this row number differentiates them. The order of gsn_rn has no meaning.', 'spanish': 'Dado que un medicamento puede pertenecer a múltiples grupos en la ontología GSN, este número de fila los diferencia. El orden de gsn_rn no tiene significado.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'gsn', 'type': 'VARCHAR(10)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The Generic Sequence Number (GSN), an ontology which provides a code for each medicine.', 'spanish': 'El Número de Secuencia Genérico (GSN), una ontología que proporciona un código para cada medicamento.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 704}], 'most_frequent_values': [{'value': '061716', 'count': 63026}, {'value': '015869', 'count': 63026}, {'value': '004490', 'count': 60821}, {'value': '062823', 'count': 41957}, {'value': '074851', 'count': 34925}, {'value': '004080', 'count': 29855}, {'value': '004225', 'count': 27586}, {'value': '003753', 'count': 22952}, {'value': '003755', 'count': 22952}, {'value': '078733', 'count': 22952}]}]}}, {'score': 0.6137214, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'medrecon', 'definition': {'english': 'On admission to the emergency departments, staff will ask the patient what current medications they are taking. This process is called medicine reconciliation, and the medrecon table stores the findings of the care providers.', 'spanish': 'Al ingresar a los servicios de urgencias, el personal sanitario pregunta al paciente qué medicamentos está tomando actualmente. Este proceso se llama conciliación de medicamentos, y la tabla medrecon almacena los hallazgos de los profesoniales de la salud.'}, 'purpose': {'english': 'Document medications a patient is currently taking.', 'spanish': 'Documentar los medicamentos que un paciente está tomando actualmente.'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'subject_id is a unique identifier which specifies an individual patient. Any rows associated with a single subject_id pertain to the same individual.', 'spanish': 'subject_id es un identificador único que hace referencia a un paciente individual. Todas las filas asociadas a un único subject_id pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': True, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica una única estancia en el servicio de urgencias para un paciente.'}, 'link_to': [{'schema': 'module_ed', 'table': 'edstays', 'column': 'stay_id'}], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'charttime', 'type': 'TIMESTAMP', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The time at which the medicine reconciliation was charted.', 'spanish': 'La hora en la que se registró la conciliación de medicamentos.'}, 'link_to': [], 'link_from': [], 'range': {'min': '2110-01-11 10:51:00', 'max': '2212-04-06 03:28:00'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'name', 'type': 'VARCHAR(255)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The name of the medication.', 'spanish': 'El nombre del medicamento.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 18746}], 'most_frequent_values': [{'value': 'aspirin', 'count': 105646}, {'value': 'omeprazole', 'count': 55518}, {'value': 'lisinopril', 'count': 48669}, {'value': 'lorazepam', 'count': 41402}, {'value': 'clonazepam', 'count': 40203}, {'value': 'gabapentin', 'count': 36589}, {'value': 'atorvastatin', 'count': 35618}, {'value': 'cholecalciferol (vitamin D3)', 'count': 33186}, {'value': 'amlodipine', 'count': 32929}, {'value': 'metoprolol succinate', 'count': 31941}]}, {'name': 'gsn', 'type': 'VARCHAR(10)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The Generic Sequence Number (GSN), an ontology for the medication.', 'spanish': 'El Número de Secuencia Genérico (GSN), una ontología para el medicamento.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 9179}], 'most_frequent_values': [{'value': '016995', 'count': 82646}, {'value': '028090', 'count': 44282}, {'value': '033530', 'count': 42431}, {'value': '003009', 'count': 36668}, {'value': '006373', 'count': 36638}, {'value': '003757', 'count': 34302}, {'value': '004380', 'count': 31836}, {'value': '022159', 'count': 29886}, {'value': '002532', 'count': 25657}, {'value': '004560', 'count': 25401}]}, {'name': 'ndc', 'type': 'VARCHAR(12)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The National Drug Code (ndc) for the medication.', 'spanish': 'El Código Nacional de Medicamentos (NDC) para el medicamento.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 9313}], 'most_frequent_values': [{'value': '10135017301', 'count': 82646}, {'value': '21695042308', 'count': 44282}, {'value': '10544034130', 'count': 42431}, {'value': '10135011101', 'count': 36668}, {'value': '10585086504', 'count': 36638}, {'value': '11845015001', 'count': 34302}, {'value': '10135024036', 'count': 31836}, {'value': '45802064287', 'count': 29886}, {'value': '10003011602', 'count': 25657}, {'value': '16590005828', 'count': 25401}]}, {'name': 'etc_rn', 'type': 'SMALLINT', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'Medications are grouped using a hierarchical ontology known as the Enhanced Therapeutic Class (ETC). As more than one group may be associated with the medication, a sequential integer (etc_rn) was generated to differentiate the groups. There is no meaning to the order of etc_rn.', 'spanish': 'Los medicamentos se agrupan utilizando una ontología jerárquica conocida como la Enhanced Therapeutic Class (ETC). Dado que se puede asociar más de un grupo al medicamento, se generó un número entero secuencial (etc_rn) para diferenciar los grupos. No tiene un significado inherente el orden de etc_rn.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'etccode', 'type': 'VARCHAR(8)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'etccode provides the code of the group within the Enhanced Therapeutic Class (ETC).', 'spanish': 'etccode proporciona el código del grupo dentro de la Enhanced Therapeutic Class (ETC).'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 1201}], 'most_frequent_values': [{'value': '00002747', 'count': 102285}, {'value': '00000445', 'count': 93308}, {'value': '00000575', 'count': 87881}, {'value': '00005843', 'count': 87178}, {'value': '00000670', 'count': 69988}, {'value': '00002530', 'count': 68528}, {'value': '00006615', 'count': 63188}, {'value': '00000523', 'count': 61048}, {'value': '00000583', 'count': 60904}, {'value': '00000530', 'count': 58271}]}, {'name': 'etcdescription', 'type': 'VARCHAR(255)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'etcdescription provides the description of the group within the Enhanced Therapeutic Class (ETC).', 'spanish': 'etcdescription proporciona la descripción del grupo dentro de la Enhanced Therapeutic Class (ETC).'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 1205}], 'most_frequent_values': [{'value': 'Antihyperlipidemic - HMG CoA Reductase Inhibitors (statins)', 'count': 102285}, {'value': 'Gastric Acid Secretion Reducing Agents - Proton Pump Inhibitors (PPIs)', 'count': 93308}, {'value': 'Salicylate Analgesics', 'count': 87881}, {'value': 'Platelet Aggregation Inhibitors - Salicylates', 'count': 87178}, {'value': 'Vitamins - D Derivatives', 'count': 69988}, {'value': 'Beta Blockers Cardiac Selective', 'count': 68528}, {'value': 'Benzodiazepines', 'count': 63188}, {'value': 'Antianxiety Agent - Benzodiazepines', 'count': 61048}, {'value': 'Analgesic Opioid Agonists', 'count': 60904}, {'value': 'Antidepressant - Selective Serotonin Reuptake Inhibitors (SSRIs)', 'count': 58271}]}]}}]\n\n            # Reglas del formato SQL:\n            \n        # Tu tarea principal es: Generación de un **Log de Eventos Hospitalarios** en formato de script SQL compatible con el dialecto PostgreSQL,\n          siguiendo las reglas siguientes:\n\n        ## 0. Reglas básicas:\n        - Tu único conocimiento es sobre la base de datos corporativa mediante el contexto del esquema proporcionado.\n        - Contesta únicamente con el código SQL sin ningún comentario adicional.\n        - No incluyas comentarios de cortesía o despedida. Eres un generador de código.\n        - Asegura no generar campos o tablas inexistentes en el contexto de la base de datos proporcionado.\n        - Si el usuario no tiene claro el objetivo, y pide algo parecido a \"dame un log de eventos de los pacientes que han llegado a Urgencias\",\n          intenta generar un log de eventos con todos los `id` posibles en el contexto recuperado, infiere eventos que dispongan de 'timestamps' en sus tablas y añade como atributos todas las columnas restantes de las mismas.\n        \n        ## 1. Identificadores únicos. (obligatorio)\n        - Incorpora los identificadores únicos al principio del script manteniendo su nombre original.\n        - Estos identificadores permiten reconocer de forma inequívoca cada instancia del proceso (p. ej., un paciente o una estancia).\n\n        ## 2. Marca temporal. (obligatorio)\n        - Registra el momento exacto en que sucede cada evento.\n        - Formato fecha `timestamp` (`YYYY-MM-DD HH:MM:SS`).\n        - Mapea la columna original a **`timestamps`**.\n\n        ## 3. Nombre del evento. (obligatorio)\n        - Describe la actividad realizada (p. ej., *Admisión del paciente*, *Alta del paciente*, *Inicio de intervención*).\n        - Mapea la columna original a **`activity`**.\n        - Si el usuario repite el nombre de un evento, añade sufijo numérico para diferenciarlos.\n        - Si el usuario no te da un valor exacto para su nombre, usa el nombre de la actividad que mejor se ajuste.\n        - Es necesario que el evento solicitado presente una marca temporal, ya sea una columna: \"Fecha Hora\", \"Fecha\"+\"Hora\".\n        - Algunos eventos especiales pueden requerir una reconstrucción atípica, \n          que involucran cálculos o uniones de varias tablas, dichos casos se especifican en el contexto de la base de datos.\n\n        ## 4. Atributos adicionales *(opcionales)*\n        - Añade columnas con la información complementaria relevante para el análisis (p. ej., *nivel de triaje*, *código diagnóstico*, *Laboratorio*, ...).\n        - Los atributos que se usan en algún evento, deben replicarse en el resto de eventos con valor `NULL`, para garantizar el buen funcionamiento de las operaciones `UNION ALL`.\n        - En cada bloque **CTE** (`WITH`) mantén el mismo alias con el nombre exacto original que en la base de datos.\n        - Si alguna columna de atributos se repite en nombre y en tipo de datos, utiliza el mismo nombre original y comparten tipo de datos aprovecha la misma columna.\n\n        ## 5. Reglas de formato e integridad del script SQL\n        - Ajusta el dialecto al motor de base de datos.\n        - Utiliza **CTEs** (`WITH`) para descomponer el script en bloques sencillos, claros y reutilizables: bloques de eventos (p. ej., admisiones, altas, medicaciones), operaciones auxiliares, validaciones, etc.\n        - Utiliza **CTEs** (`WITH`) adicionales al principio del script si hay validaciones de datos o filtros que afecten a toda una tabla.\n        - La última **CTE** ('WITH`) debe ser una operación **`UNION ALL`** para formar el log de eventos final.\n        - Especifica el esquema de la base de datos en las operaciones `FROM` y `JOIN`.\n        - Orden de columnas en las CTE y en el `UNION ALL` final:\n            1. Columnas con los identificadores únicos siempre al principio.\n            2. `timestamps`\n            3. `activity`\n            4. Columnas de Atributos adicionales.\n        - Si algún atributo tiene secuencia, NO limites al primer elemento, a no ser que lo especifique el usuario. (ojo con el uso de JOIN o LEFT JOIN si es necesario repetir eventos para mantener la secuencia.)\n        - Cuando un atributo no aplique a un evento, rellénalo con `NULL`.\n        - Mantén la integridad de los tipos de datos originales en todo el script, mediante EXPLICIT CASTS.\n        - Usa los EXPLICIT CASTS óptimos para el dialecto SQL utilizado. (por ejemplo, '1234'::INTEGER en PostgreSQL o `CAST(column_name AS DATE)` en otros dialectos.)\n        - Para las relaciones entre tablas usa tiempre nomenclatura estándar de SQL tipo `FROM <A>.<B> <C> <JOIN'S> <ON> <CONDITIONS>`.\n        - Usa siempre los nombres originales de las columnas salvo los mapeos indicados de `timestamps` y `activity`, o los mapeos que indique el usuario.\n        - Tabula el script SQL para facilitar la lectura de los bloques `CTE`, operaciones `CAST`.\n        - Concluye siempre el script con **`SELECT * FROM (…) ORDER BY timestamps ASC;`** al final del script a no ser que el usuario especifique otro orden.\n       \n        ## 6. Ejemplo de output del script SQL.\n\n        | <columna id1> | <columna id2> | timestamps          | activity   | <columna atributo1> | <columna atributo2> | … |,\n        |---------------|---------------|---------------------|------------|---------------------|---------------------|---|,\n        | 12345         | 21231         | 2025-04-18T08:30:00 | Llegada    | 2                   | NULL                | … |,\n        | 12345         | 21231         | 2025-04-19T09:25:00 | Alta       | NULL                | B34.9               | … |,\n\n        \n            ",
  "sql_script": "```sql\nWITH\ncte_arrival AS (\n    SELECT\n        ed.subject_id,\n        ed.hadm_id,\n        ed.stay_id,\n        ed.intime                                      AS timestamps,\n        'Llegada a Urgencias (ED)'                     AS activity,\n        ed.arrival_transport                           AS arrival_transport,\n        ed.gender                                      AS gender,\n        ed.race                                        AS race,\n        NULL::VARCHAR(255)                             AS disposition,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title,\n        NULL::INTEGER                                  AS diagnosis_seq_num\n    FROM module_ed.edstays ed\n),\ncte_triage AS (\n    SELECT\n        tr.subject_id,\n        ed.hadm_id,\n        tr.stay_id,\n        (ed.intime + INTERVAL '1 second')              AS timestamps,\n        'Triaje en Urgencias (ED)'                     AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(60)                              AS race,\n        NULL::VARCHAR(255)                             AS disposition,\n        tr.temperature                                 AS temperature,\n        tr.heartrate                                   AS heartrate,\n        tr.resprate                                    AS resprate,\n        tr.o2sat                                       AS o2sat,\n        tr.sbp::INTEGER                                AS sbp,\n        tr.dbp::INTEGER                                AS dbp,\n        tr.pain                                        AS pain,\n        tr.acuity                                      AS acuity,\n        tr.chiefcomplaint                              AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title,\n        NULL::INTEGER                                  AS diagnosis_seq_num\n    FROM module_ed.triage tr\n    JOIN module_ed.edstays ed\n      ON tr.stay_id = ed.stay_id\n),\ncte_vitalsign AS (\n    SELECT\n        vs.subject_id,\n        ed.hadm_id,\n        vs.stay_id,\n        vs.charttime                                  AS timestamps,\n        'Toma de Constantes Vitales'                  AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(60)                              AS race,\n        NULL::VARCHAR(255)                             AS disposition,\n        vs.temperature                                 AS temperature,\n        vs.heartrate                                   AS heartrate,\n        vs.resprate                                    AS resprate,\n        vs.o2sat                                       AS o2sat,\n        vs.sbp                                         AS sbp,\n        vs.dbp                                         AS dbp,\n        vs.pain                                        AS pain,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title,\n        NULL::INTEGER                                  AS diagnosis_seq_num\n    FROM module_ed.vitalsign vs\n    JOIN module_ed.edstays ed\n      ON vs.stay_id = ed.stay_id\n),\ncte_medrecon AS (\n    SELECT\n        mr.subject_id,\n        ed.hadm_id,\n        mr.stay_id,\n        mr.charttime                                  AS timestamps,\n        'Conciliación de Medicamentos'                AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(60)                              AS race,\n        NULL::VARCHAR(255)                             AS disposition,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        mr.name                                        AS medrecon_name,\n        mr.gsn                                         AS medrecon_gsn,\n        mr.ndc                                         AS medrecon_ndc,\n        mr.etccode                                     AS medrecon_etccode,\n        mr.etcdescription                              AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title,\n        NULL::INTEGER                                  AS diagnosis_seq_num\n    FROM module_ed.medrecon mr\n    JOIN module_ed.edstays ed\n      ON mr.stay_id = ed.stay_id\n),\ncte_pyxis AS (\n    SELECT\n        px.subject_id,\n        ed.hadm_id,\n        px.stay_id,\n        px.charttime                                  AS timestamps,\n        'Dispensación de Medicamentos'                AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(60)                              AS race,\n        NULL::VARCHAR(255)                             AS disposition,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        px.name                                        AS pyxis_name,\n        px.gsn                                         AS pyxis_gsn,\n        px.med_rn                                      AS pyxis_med_rn,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title,\n        NULL::INTEGER                                  AS diagnosis_seq_num\n    FROM module_ed.pyxis px\n    JOIN module_ed.edstays ed\n      ON px.stay_id = ed.stay_id\n),\ncte_diagnosis AS (\n    SELECT\n        dg.subject_id,\n        ed.hadm_id,\n        dg.stay_id,\n        ed.outtime                                   AS timestamps,\n        CONCAT('Alta de Urgencias (ED) ', dg.seq_num) AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(60)                              AS race,\n        ed.disposition                                AS disposition,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        dg.icd_code                                   AS diagnosis_icd_code,\n        dg.icd_version                                AS diagnosis_icd_version,\n        dg.icd_title                                  AS diagnosis_icd_title,\n        dg.seq_num                                    AS diagnosis_seq_num\n    FROM module_ed.diagnosis dg\n    JOIN module_ed.edstays ed\n      ON dg.stay_id = ed.stay_id\n),\nfinal_log AS (\n    SELECT * FROM cte_arrival\n    UNION ALL\n    SELECT * FROM cte_triage\n    UNION ALL\n    SELECT * FROM cte_vitalsign\n    UNION ALL\n    SELECT * FROM cte_medrecon\n    UNION ALL\n    SELECT * FROM cte_pyxis\n    UNION ALL\n    SELECT * FROM cte_diagnosis\n)\nSELECT *\nFROM final_log\nORDER BY timestamps ASC;\n```",
  "prompt_sql_generator_enhanced": "\n            Eres un experto en SQL. Revisa el script SQL generado en dialecto PostgreSQL y realiza las correcciones necesarias.\n\n            # Bloque de contexto de necesidades del usuario, conocimientos de la base de datos corporativa y formato del script SQL:\n            #################################\n            \n            Eres un experto en SQL hospitalario. Genera un log de eventos en formato SQL según las reglas siguientes.\n\n            # Necesidades del usuario:\n            Consulta del usuario: Objetivo: Generar un log de eventos que involucre todo el módulo de urgencias, para trazar los eventos generados en el servicio de extremo a extremo. Grupo de pacientes: Toda la población en general. Identificadores únicos: id del paciente, id de estancia en urgencias, id de estancia hospitalaria (si disponible), id de intervención quirúrgica (si disponible). Eventos a capturar: 1. Llegada del paciente de urgencias (Entrada a Urgencias (ED)), 2. Alta del paciente (Salida de Urgencias (ED)), 3. Triaje del paciente (Triaje en Urgencias (ED)), 4. Toma de constantes vitales (Toma de Constantes Vitales), 5. Entrevista de conciliación de medicamentos (Conciliación de Medicamentos), 6. Dispensación de medicamentos (Dispensación de Medicamentos), 7. Pruebas de laboratorio (Pruebas de Laboratorio), 8. Pruebas radiológicas (Pruebas Radiológicas). Atributos a registrar: - Llegada del paciente: medio de llegada, género, edad, y otros campos disponibles. - Alta del paciente: motivo de alta, secuencia de códigos de diagnósticos, descripciones y versiones de codificación. - Triaje: nivel de triaje, tomas de constantes vitales realizadas, y campos de texto libre. - Toma de constantes vitales: todas las tomas de constantes vitales. - Conciliación de medicamentos: todos los campos posibles. - Dispensación de medicamentos: todos los campos posibles. - Pruebas de laboratorio: nombre de tipo de prueba. - Pruebas radiológicas: nombre de tipo de prueba. Validación de datos: - 'Llegada a Urgencias (ED)' < 'Alta de Urgencias (ED)' - 'Toma de Constantes Vitales' <= 'Alta de Urgencias (ED)' - 'Dispensación de Medicamentos' <= 'Alta de Urgencias (ED)' - 'Conciliación de Medicamentos' <= 'Alta de Urgencias (ED)' Orden de visualización: Ordenar por id de paciente ascendente y por marca de tiempo del evento ascendente.\n\n            # Contexto del esquema:\n            [{'score': 0.7022557, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'edstays', 'definition': {'english': 'The edstays table is the primary tracking table for emergency department visits. It provides the time the patient entered the emergency department and the time they left the emergency department.', 'spanish': 'La tabla edstays es la tabla principal de registro para las visitas al servicio de urgencias. Proporciona la hora en la que el paciente ingresó al servicio de urgencias y la hora en la que salió.'}, 'purpose': {'english': 'Track patient admissions to the emergency department.', 'spanish': 'Rastrear las admisiones de pacientes en el servicio de urgencias.'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'subject_id is a unique identifier which specifies an individual patient. Any rows associated with a single subject_id pertain to the same individual.', 'spanish': 'subject_id es un identificador único que especifica un paciente individual. Todas las filas asociadas a un único subject_id pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'hadm_id', 'type': 'INTEGER', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'If the patient was admitted to the hospital after their ED stay, hadm_id will contain the hospital identifier (ranges from 2000000 to 2999999). The hadm_id may be used to link the ED stay with the hospitalization in corporative database. If hadm_id is NULL, the patient was not admitted to the hospital after their ED stay.', 'spanish': 'Si el paciente fue admitido en el hospital después de su estancia en urgencias, hadm_id contendrá el identificador del hospital (rango de 2000000 a 2999999). hadm_id puede usarse para vincular la estancia en urgencias con la hospitalización en la base de datos corporativa. Si hadm_id es NULL, el paciente no fue admitido en el hospital después de su estancia en urgencias.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': True, 'is_fk': False, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica de forma única una única estancia en el servicio de urgencias para un único paciente.'}, 'link_to': [], 'link_from': [{'schema': 'module_ed', 'table': 'pyxis', 'column': 'stay_id'}, {'schema': 'module_ed', 'table': 'diagnosis', 'column': 'stay_id'}, {'schema': 'module_ed', 'table': 'medrecon', 'column': 'stay_id'}, {'schema': 'module_ed', 'table': 'triage', 'column': 'stay_id'}, {'schema': 'module_ed', 'table': 'vitalsign', 'column': 'stay_id'}], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'intime', 'type': 'TIMESTAMP', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The admission datetime (intime) of the given emergency department stay.', 'spanish': 'La fecha y hora del ingreso (intime) de la estancia en el servicio de urgencias.'}, 'link_to': [], 'link_from': [], 'range': {'min': '2110-01-11 01:45:00', 'max': '2212-04-05 23:23:00'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'outtime', 'type': 'TIMESTAMP', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The discharge datetime (outtime) of the given emergency department stay.', 'spanish': 'La fecha y hora de egreso (outtime) de la estancia en el servicio de urgencias.'}, 'link_to': [], 'link_from': [], 'range': {'min': '2110-01-11 07:04:00', 'max': '2212-04-06 14:20:00'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'gender', 'type': 'VARCHAR(1)', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s administrative gender as documented in the hospital system.', 'spanish': 'El género administrativo del paciente según consta en los registros del sistema hospitalario.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 2}], 'most_frequent_values': [{'value': 'F', 'count': 229898}, {'value': 'M', 'count': 195189}]}, {'name': 'race', 'type': 'VARCHAR(60)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s self-reported race. Race is aggregated into higher level categories for very small groups. As of corporative database v2.1, there were 33 unique categories for race.', 'spanish': 'La raza autoinformada del paciente. La raza se agrupa en categorías de nivel superior para grupos muy pequeños. A partir de la base de datos corporativa v2.1, había 33 categorías únicas para la raza.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 33}], 'most_frequent_values': [{'value': 'WHITE', 'count': 228123}, {'value': 'BLACK/AFRICAN AMERICAN', 'count': 76798}, {'value': 'OTHER', 'count': 20752}, {'value': 'HISPANIC/LATINO - PUERTO RICAN', 'count': 14036}, {'value': 'WHITE - OTHER EUROPEAN', 'count': 8992}, {'value': 'HISPANIC/LATINO - DOMINICAN', 'count': 8330}, {'value': 'BLACK/CAPE VERDEAN', 'count': 7638}, {'value': 'ASIAN - CHINESE', 'count': 7348}, {'value': 'ASIAN', 'count': 7294}, {'value': 'UNKNOWN', 'count': 7083}]}, {'name': 'arrival_transport', 'type': 'VARCHAR(50)', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The method through which the individual arrived at the ED. Possible entries include: WALK IN, AMBULANCE, UNKNOWN, OTHER, HELICOPTER.', 'spanish': 'El método a través del cual el paciente llegó al servicio de urgencias. Las entradas posibles incluyen: WALK IN, AMBULANCE, UNKNOWN, OTHER, HELICOPTER.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 5}], 'most_frequent_values': [{'value': 'WALK IN', 'count': 251849}, {'value': 'AMBULANCE', 'count': 155752}, {'value': 'UNKNOWN', 'count': 15352}, {'value': 'OTHER', 'count': 1266}, {'value': 'HELICOPTER', 'count': 868}]}, {'name': 'disposition', 'type': 'VARCHAR(255)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The method through which the individual left the ED. Possible non-null methods include: HOME, ADMITTED, TRANSFER, LEFT WITHOUT BEING SEEN, OTHER, LEFT AGAINST MEDICAL ADVICE, ELOPED, EXPIRED.', 'spanish': 'El método a través del cual el individuo salió del servicio de urgencias. Las posibles opciones, excluyendo valores nulos, incluyen: HOME, ADMITTED, TRANSFER, LEFT WITHOUT BEING SEEN, OTHER, LEFT AGAINST MEDICAL ADVICE, ELOPED, EXPIRED.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 8}], 'most_frequent_values': [{'value': 'HOME', 'count': 241632}, {'value': 'ADMITTED', 'count': 158010}, {'value': 'TRANSFER', 'count': 7025}, {'value': 'LEFT WITHOUT BEING SEEN', 'count': 6155}, {'value': 'ELOPED', 'count': 5710}, {'value': 'OTHER', 'count': 4297}, {'value': 'LEFT AGAINST MEDICAL ADVICE', 'count': 1881}, {'value': 'EXPIRED', 'count': 377}]}]}}, {'score': 0.6972975, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'vitalsign', 'definition': {'english': 'Patients admitted to the emergency department have routine vital signs taken every 1-4 hours. These vital signs are stored in the vitalsign table.', 'spanish': 'A los pacientes ingresados en el servicio de urgencias, se les toman los signos vitales de manera rutinaria cada 1-4 horas. Estos signos vitales se almacenan en la tabla vitalsign.'}, 'purpose': {'english': 'Provides nurse documented vital signs.', 'spanish': 'Proporciona los signos vitales registrados por el personal de enfermería.'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': '`subject_id` is a unique identifier which specifies an individual patient. Any rows associated with a single `subject_id` pertain to the same individual.', 'spanish': '`subject_id` es un identificador único que especifica a un paciente individual. Todas las filas asociadas a un único `subject_id` pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': True, 'is_fk': True, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica de forma única una única estancia en el servicio de urgencias para un paciente.'}, 'link_to': [{'schema': 'module_ed', 'table': 'edstays', 'column': 'stay_id'}], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'charttime', 'type': 'TIMESTAMP', 'nullable': False, 'is_pk': True, 'is_fk': False, 'description': {'english': 'The time at which the vital signs were charted.', 'spanish': 'La hora en la que se registraron los signos vitales.'}, 'link_to': [], 'link_from': [], 'range': {'min': '2110-01-11 01:49:00', 'max': '2212-04-06 12:20:00'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'temperature', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's temperature in degrees Farenheit. Some temperatures may be incorrectly documented as Celsius.\", 'spanish': 'La temperatura del paciente en grados Fahrenheit. Algunas temperaturas pueden estar incorrectamente documentadas en Celsius.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '989.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'heartrate', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's heart rate in beats per minute.\", 'spanish': 'La frecuencia cardíaca del paciente en latidos por minuto.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '1109.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'resprate', 'type': 'NUMERIC(10,4)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's respiratory rate in breaths per minute.\", 'spanish': 'La frecuencia respiratoria del paciente en respiraciones por minuto.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '94452.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'o2sat', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's oxygen saturation measured as a percentage.\", 'spanish': 'La saturación de oxígeno del paciente medida como un porcentaje.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '9997.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'sbp', 'type': 'INTEGER', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's systolic blood pressure measured in millimetres of mercury (mmHg).\", 'spanish': 'La presión arterial sistólica del paciente medida en milímetros de mercurio (mmHg).'}, 'link_to': [], 'link_from': [], 'range': {'min': '0', 'max': '1234'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'dbp', 'type': 'INTEGER', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's diastolic blood pressure measured in millimetres of mercury (mmHg).\", 'spanish': 'La presión arterial diastólica del paciente medida en milímetros de mercurio (mmHg).'}, 'link_to': [], 'link_from': [], 'range': {'min': '0', 'max': '97100'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'rhythm', 'type': 'VARCHAR', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's heart rhythm.\", 'spanish': 'El ritmo cardíaco del paciente.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 1171}], 'most_frequent_values': [{'value': 'Sinus Rhythm', 'count': 18894}, {'value': 'Normal Sinus Rhythm', 'count': 12316}, {'value': 'Atrial Fibrillation', 'count': 5238}, {'value': 'Sinus Tachycardia', 'count': 5133}, {'value': 'Sinus Bradycardia', 'count': 3246}, {'value': 'sr', 'count': 3020}, {'value': 'Paced Rhythm', 'count': 1777}, {'value': 'nsr', 'count': 1175}, {'value': 'SR', 'count': 1040}, {'value': 'afib', 'count': 870}]}, {'name': 'pain', 'type': 'VARCHAR', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': \"The patient's self-reported level of pain on a scale from 0-10. The pain is documented as free-text and may contain non-numeric entries.\", 'spanish': 'El nivel de dolor auto reportado por el paciente en una escala de 0 a 10. El dolor se documenta como texto libre y puede contener entradas no numéricas.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 3144}], 'most_frequent_values': [{'value': '0', 'count': 560092}, {'value': '5', 'count': 62116}, {'value': '8', 'count': 57789}, {'value': '4', 'count': 51170}, {'value': '2', 'count': 48236}, {'value': '7', 'count': 46546}, {'value': '6', 'count': 46274}, {'value': '3', 'count': 44930}, {'value': '10', 'count': 42841}, {'value': '9', 'count': 24075}]}]}}, {'score': 0.68056476, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'triage', 'definition': {'english': 'The triage table contains information about the patient when they were first triaged in the emergency department. Patients are assessed at triage by a single care provider and asked a series of questions to assess their current health status. Their vital signs are measured and a level of acuity is assigned. Based on the level of acuity, the patient either waits in the waiting room for later attention, or is prioritized for immediate care. All fields in triage were originally free-text. For deidentification purposes, the vital sign and pain fields were converted into a numeric value. As a result, a small number of NULL values were introduced for text entries.', 'spanish': 'La tabla triage contiene información sobre el paciente cuando fue evaluado por primera vez a su llegada al servicio de urgencias. Los pacientes son evaluados en triaje por un único profesional sanitario y se les realizan una serie de preguntas para evaluar su estado de salud actual. Se miden sus signos vitales y se asigna un nivel de prioridad (nivel de triaje). En función del nivel de triaje, el paciente espera en la sala de espera hasta recibir atención sanitaria o se le da atención inmediata. Todos los campos en triage fueron originalmente de texto libre. Por razones de desidentificación, los campos de signos vitales y dolor se convirtieron en valores numéricos, lo que introdujo un pequeño número de valores NULL en las entradas de texto.'}, 'purpose': {'english': 'Store information collected on triage to the emergency department. This table does not include timestamps. If temporal data needs to be imputed, it should be calculated using the intime field from the edstays table as a reference, using the formula: (intime + 1 second).', 'spanish': 'Almacena la información recopilada durante el triaje en el servicio de urgencias. Esta tabla no dispone de `timestamps`. Si se necesita imputar `timestamps`, su cálculo debe hacerse tomando como referencia el campo `intime` ubicado enla tabla `edstays` mediante el cálculo: (`intime` + 1 segundo.)'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'subject_id is a unique identifier which specifies an individual patient. Any rows associated with a single subject_id pertain to the same individual.', 'spanish': 'subject_id es un identificador único que hace referencia a un paciente individual. Todas las filas asociadas a un único subject_id pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': True, 'is_fk': True, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica una única estancia en el servicio de urgencias para un paciente.'}, 'link_to': [{'schema': 'module_ed', 'table': 'edstays', 'column': 'stay_id'}], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'temperature', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s temperature in degrees Farenheit. Some temperatures may be incorrectly documented as Celsius.', 'spanish': 'La temperatura del paciente, por defecto está en grados Fahrenheit. Algunas temperaturas pueden estar incorrectamente regisradas en Celsius.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.1000', 'max': '986.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'heartrate', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s heart rate in beats per minute.', 'spanish': 'La frecuencia cardíaca del paciente en latidos por minuto.'}, 'link_to': [], 'link_from': [], 'range': {'min': '1.0000', 'max': '1228.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'resprate', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s respiratory rate in breaths per minute.', 'spanish': 'La frecuencia respiratoria del paciente en respiraciones por minuto.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '1820.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'o2sat', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s peripheral oxygen saturation as a percentage.', 'spanish': 'La saturación periférica de oxígeno del paciente como porcentaje.'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '9322.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'sbp', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s systolic blood pressure, measured in millimetres of mercury (mmHg).', 'spanish': 'La presión arterial sistólica del paciente, medida en milímetros de mercurio (mmHg).'}, 'link_to': [], 'link_from': [], 'range': {'min': '1.0000', 'max': '151103.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'dbp', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The patient’s diastolic blood pressure, measured in millimetres of mercury (mmHg).', 'spanish': 'La presión arterial diastólica del paciente, medida en milímetros de mercurio (mmHg).'}, 'link_to': [], 'link_from': [], 'range': {'min': '0.0000', 'max': '661672.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'pain', 'type': 'VARCHAR', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The level of pain self-reported by the patient, on a scale of 0-10.', 'spanish': 'El nivel de dolor auto reportado por el paciente, en una escala de 0 a 10.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 850}], 'most_frequent_values': [{'value': '0', 'count': 140719}, {'value': '8', 'count': 41730}, {'value': '10', 'count': 40914}, {'value': '7', 'count': 31423}, {'value': '5', 'count': 29210}, {'value': '6', 'count': 25206}, {'value': '9', 'count': 20210}, {'value': '4', 'count': 19721}, {'value': '3', 'count': 16115}, {'value': '2', 'count': 13903}]}, {'name': 'acuity', 'type': 'NUMERIC', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'An order of priority based upon acuity utilizing the Emergency Severity Index (ESI) Five Level triage system. This priority is assigned by a registered nurse. Level 1 is the highest priority, while level 5 is the lowest priority.', 'spanish': 'Un orden de prioridad basado en el nivel de triaje utilizando el sistema de cinco niveles del Índice de Severidad de Emergencias (ESI). Esta prioridad es asignada por un profesional de enfermería. El nivel 1 es la mayor prioridad o gravedad, mientras que el nivel 5 es la menor prioridad o gravedad.'}, 'link_to': [], 'link_from': [], 'range': {'min': '1.0000', 'max': '5.0000'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'chiefcomplaint', 'type': 'VARCHAR(255)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'A deidentified free-text description of the patient’s chief complaint.', 'spanish': 'Una descripción de texto libre desidentificada de la queja principal del paciente.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 60407}], 'most_frequent_values': [{'value': 'Chest pain', 'count': 11301}, {'value': 'Abd pain', 'count': 10771}, {'value': 'Dyspnea', 'count': 6003}, {'value': 's/p Fall', 'count': 4965}, {'value': 'ABD PAIN', 'count': 4957}, {'value': 'SI', 'count': 4926}, {'value': 'ETOH', 'count': 4679}, {'value': 'Wound eval', 'count': 4509}, {'value': 'Headache', 'count': 3828}, {'value': 'Back pain', 'count': 3166}]}]}}, {'score': 0.66924953, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'diagnosis', 'definition': {'english': 'The diagnosis table provides billed diagnoses for patients. Diagnoses are determined after discharge from the emergency department.', 'spanish': 'La tabla diagnosis provee diagnósticos facturados para los pacientes. Los diagnósticos se determinan después del alta del servicio de urgencias.'}, 'purpose': {'english': 'Track patient admissions to the emergency department.', 'spanish': 'Rastrear las admisiones de pacientes en el servicio de urgencias.'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'subject_id is a unique identifier which specifies an individual patient. Any rows associated with a single subject_id pertain to the same individual.', 'spanish': 'subject_id es un identificador único que hace referencia a un paciente individual. Todas las filas asociadas a un único subject_id pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': True, 'is_fk': True, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica de forma única una única estancia en el servicio de urgencias para un paciente.'}, 'link_to': [{'schema': 'module_ed', 'table': 'edstays', 'column': 'stay_id'}], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'seq_num', 'type': 'INTEGER', 'nullable': False, 'is_pk': True, 'is_fk': False, 'description': {'english': 'A pseudo-priority for the diagnosis. A seq_num of 1 usually indicates a “primary” diagnosis, but accurately assessing the priority for patients with multiple diagnoses is challenging.', 'spanish': 'Una pseudo-prioridad para el diagnóstico. Un seq_num de 1 normalmente indica el diagnóstico principal.'}, 'link_to': [], 'link_from': [], 'range': {'min': '1', 'max': '9'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'icd_code', 'type': 'VARCHAR(8)', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'A coded diagnosis using the International Classification of Diseases (ICD) ontology.', 'spanish': 'Un diagnóstico codificado utilizando la Clasificación Internacional de Enfermedades (ICD).'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 13199}], 'most_frequent_values': [{'value': '4019', 'count': 26816}, {'value': 'I10', 'count': 21264}, {'value': 'R079', 'count': 13016}, {'value': '78650', 'count': 12398}, {'value': '25000', 'count': 12026}, {'value': 'R109', 'count': 10504}, {'value': 'E119', 'count': 8801}, {'value': '78909', 'count': 8704}, {'value': 'W1830XA', 'count': 7817}, {'value': 'E8889', 'count': 7085}]}, {'name': 'icd_version', 'type': 'SMALLINT', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The version of the ICD system used; either 9 indicating ICD-9 or 10 indicating ICD-10. The ontologies for these two systems differ, and therefore the meaning of the icd_code will depend on the icd_version.', 'spanish': 'La versión del sistema ICD utilizado; puede ser 9, que indica ICD-9, o 10, que indica ICD-10. El significado de icd_code dependerá de icd_version.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'icd_title', 'type': 'VARCHAR', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The textual description of the diagnosis.', 'spanish': 'La descripción textual del diagnóstico.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 13172}], 'most_frequent_values': [{'value': 'HYPERTENSION NOS', 'count': 26816}, {'value': 'Essential (primary) hypertension', 'count': 21264}, {'value': 'Chest pain, unspecified', 'count': 13016}, {'value': 'CHEST PAIN NOS', 'count': 12398}, {'value': 'DIABETES UNCOMPL ADULT', 'count': 12026}, {'value': 'Unspecified abdominal pain', 'count': 10504}, {'value': 'Type 2 diabetes mellitus without complications', 'count': 8801}, {'value': 'ABDOMINAL PAIN OTHER SPECIED', 'count': 8704}, {'value': 'Fall on same level, unspecified, initial encounter', 'count': 7817}, {'value': 'UNSPECIFIED FALL', 'count': 7081}]}]}}, {'score': 0.6473727, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'pyxis', 'definition': {'english': 'The pyxis table provides information for medicine dispensations made via the Pyxis system. Note that as the same medication may have multiple gsn values, each row does not necessarily indicate a unique dispensation. The med_rn column allows for subselecting to individual dispensations.', 'spanish': 'La tabla pyxis provee información sobre las dispensaciones de medicamentos realizadas a través del sistema Pyxis. Tenga en cuenta que, dado que el mismo medicamento puede tener múltiples valores de gsn, cada fila no necesariamente indica una dispensación única. La columna med_rn permite seleccionar subgrupos de dispensaciones individuales.'}, 'purpose': {'english': 'Track medicine administrations.', 'spanish': 'Rastrear las administraciones de medicamentos.'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'subject_id is a unique identifier which specifies an individual patient. Any rows associated with a single subject_id pertain to the same individual.', 'spanish': 'subject_id es un identificador único que hace referencia a un paciente individual. Todas las filas asociadas a un único subject_id pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': True, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica una única estancia en el servicio de urgencias para un paciente.'}, 'link_to': [{'schema': 'module_ed', 'table': 'edstays', 'column': 'stay_id'}], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'charttime', 'type': 'TIMESTAMP', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The time at which the medication was charted, which is the closest approximation to the time the medication was administered.', 'spanish': 'La hora en la que se registró la medicación, que es la aproximación más cercana al momento en que se administró el medicamento.'}, 'link_to': [], 'link_from': [], 'range': {'min': '2110-01-11 05:21:00', 'max': '2212-04-06 07:54:00'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'med_rn', 'type': 'SMALLINT', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'A row number for the medicine used to group single dispensations.', 'spanish': 'Un número de fila para el medicamento utilizado para agrupar dispensaciones individuales.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'name', 'type': 'VARCHAR(255)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The name of the medicine.', 'spanish': 'El nombre del medicamento.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 1102}], 'most_frequent_values': [{'value': 'Ondansetron', 'count': 84890}, {'value': 'Acetaminophen', 'count': 45740}, {'value': 'Lorazepam', 'count': 43798}, {'value': 'Ondansetron 4mg/2mL 2mL VIAL', 'count': 41162}, {'value': 'Morphine Sulfate', 'count': 39854}, {'value': 'HYDROmorphone (Dilaudid)', 'count': 37616}, {'value': 'Morphine', 'count': 29855}, {'value': 'Vancomycin', 'count': 27226}, {'value': 'Acetaminophen 500mg TAB', 'count': 26746}, {'value': 'Morphine Sulfat 4mg/1mL 1mL VIAL', 'count': 26157}]}, {'name': 'gsn_rn', 'type': 'SMALLINT', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'As a medicine may be a member of multiple groups in the GSN ontology, this row number differentiates them. The order of gsn_rn has no meaning.', 'spanish': 'Dado que un medicamento puede pertenecer a múltiples grupos en la ontología GSN, este número de fila los diferencia. El orden de gsn_rn no tiene significado.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'gsn', 'type': 'VARCHAR(10)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The Generic Sequence Number (GSN), an ontology which provides a code for each medicine.', 'spanish': 'El Número de Secuencia Genérico (GSN), una ontología que proporciona un código para cada medicamento.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 704}], 'most_frequent_values': [{'value': '061716', 'count': 63026}, {'value': '015869', 'count': 63026}, {'value': '004490', 'count': 60821}, {'value': '062823', 'count': 41957}, {'value': '074851', 'count': 34925}, {'value': '004080', 'count': 29855}, {'value': '004225', 'count': 27586}, {'value': '003753', 'count': 22952}, {'value': '003755', 'count': 22952}, {'value': '078733', 'count': 22952}]}]}}, {'score': 0.6137214, 'module': {'id': 'module_ed', 'schema_db': 'module_ed', 'description': {'english': 'The **ED module** contains data for emergency department patients collected while they are in the ED. Information includes reason for admission, triage assessment, vital signs, and medicine reconciliation. The `subject_id` and `hadm_id` identifiers allow emergency module to be linked to other corporative database modules.', 'spanish': 'El **módulo ED** contiene datos de pacientes del servicio de urgencias recopilados mientras se encuentran en el Servicio de Urgencias (ED). La información incluye el motivo de admisión, el nivel de triaje, los signos vitales y la conciliación de medicamentos. Los identificadores `subject_id` y `hadm_id` permiten vincular al módulo de urgencias con otros módulos de la base de datos corporativa.'}}, 'table': {'name': 'medrecon', 'definition': {'english': 'On admission to the emergency departments, staff will ask the patient what current medications they are taking. This process is called medicine reconciliation, and the medrecon table stores the findings of the care providers.', 'spanish': 'Al ingresar a los servicios de urgencias, el personal sanitario pregunta al paciente qué medicamentos está tomando actualmente. Este proceso se llama conciliación de medicamentos, y la tabla medrecon almacena los hallazgos de los profesoniales de la salud.'}, 'purpose': {'english': 'Document medications a patient is currently taking.', 'spanish': 'Documentar los medicamentos que un paciente está tomando actualmente.'}, 'fields': [{'name': 'subject_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': False, 'description': {'english': 'subject_id is a unique identifier which specifies an individual patient. Any rows associated with a single subject_id pertain to the same individual.', 'spanish': 'subject_id es un identificador único que hace referencia a un paciente individual. Todas las filas asociadas a un único subject_id pertenecen al mismo individuo.'}, 'link_to': [], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'stay_id', 'type': 'INTEGER', 'nullable': False, 'is_pk': False, 'is_fk': True, 'description': {'english': 'An identifier which uniquely identifies a single emergency department stay for a single patient.', 'spanish': 'Un identificador que identifica una única estancia en el servicio de urgencias para un paciente.'}, 'link_to': [{'schema': 'module_ed', 'table': 'edstays', 'column': 'stay_id'}], 'link_from': [], 'range': {'min': 'N/A', 'max': 'N/A'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'charttime', 'type': 'TIMESTAMP', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The time at which the medicine reconciliation was charted.', 'spanish': 'La hora en la que se registró la conciliación de medicamentos.'}, 'link_to': [], 'link_from': [], 'range': {'min': '2110-01-11 10:51:00', 'max': '2212-04-06 03:28:00'}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'name', 'type': 'VARCHAR(255)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The name of the medication.', 'spanish': 'El nombre del medicamento.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 18746}], 'most_frequent_values': [{'value': 'aspirin', 'count': 105646}, {'value': 'omeprazole', 'count': 55518}, {'value': 'lisinopril', 'count': 48669}, {'value': 'lorazepam', 'count': 41402}, {'value': 'clonazepam', 'count': 40203}, {'value': 'gabapentin', 'count': 36589}, {'value': 'atorvastatin', 'count': 35618}, {'value': 'cholecalciferol (vitamin D3)', 'count': 33186}, {'value': 'amlodipine', 'count': 32929}, {'value': 'metoprolol succinate', 'count': 31941}]}, {'name': 'gsn', 'type': 'VARCHAR(10)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The Generic Sequence Number (GSN), an ontology for the medication.', 'spanish': 'El Número de Secuencia Genérico (GSN), una ontología para el medicamento.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 9179}], 'most_frequent_values': [{'value': '016995', 'count': 82646}, {'value': '028090', 'count': 44282}, {'value': '033530', 'count': 42431}, {'value': '003009', 'count': 36668}, {'value': '006373', 'count': 36638}, {'value': '003757', 'count': 34302}, {'value': '004380', 'count': 31836}, {'value': '022159', 'count': 29886}, {'value': '002532', 'count': 25657}, {'value': '004560', 'count': 25401}]}, {'name': 'ndc', 'type': 'VARCHAR(12)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'The National Drug Code (ndc) for the medication.', 'spanish': 'El Código Nacional de Medicamentos (NDC) para el medicamento.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 9313}], 'most_frequent_values': [{'value': '10135017301', 'count': 82646}, {'value': '21695042308', 'count': 44282}, {'value': '10544034130', 'count': 42431}, {'value': '10135011101', 'count': 36668}, {'value': '10585086504', 'count': 36638}, {'value': '11845015001', 'count': 34302}, {'value': '10135024036', 'count': 31836}, {'value': '45802064287', 'count': 29886}, {'value': '10003011602', 'count': 25657}, {'value': '16590005828', 'count': 25401}]}, {'name': 'etc_rn', 'type': 'SMALLINT', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'Medications are grouped using a hierarchical ontology known as the Enhanced Therapeutic Class (ETC). As more than one group may be associated with the medication, a sequential integer (etc_rn) was generated to differentiate the groups. There is no meaning to the order of etc_rn.', 'spanish': 'Los medicamentos se agrupan utilizando una ontología jerárquica conocida como la Enhanced Therapeutic Class (ETC). Dado que se puede asociar más de un grupo al medicamento, se generó un número entero secuencial (etc_rn) para diferenciar los grupos. No tiene un significado inherente el orden de etc_rn.'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [], 'most_frequent_values': []}, {'name': 'etccode', 'type': 'VARCHAR(8)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'etccode provides the code of the group within the Enhanced Therapeutic Class (ETC).', 'spanish': 'etccode proporciona el código del grupo dentro de la Enhanced Therapeutic Class (ETC).'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 1201}], 'most_frequent_values': [{'value': '00002747', 'count': 102285}, {'value': '00000445', 'count': 93308}, {'value': '00000575', 'count': 87881}, {'value': '00005843', 'count': 87178}, {'value': '00000670', 'count': 69988}, {'value': '00002530', 'count': 68528}, {'value': '00006615', 'count': 63188}, {'value': '00000523', 'count': 61048}, {'value': '00000583', 'count': 60904}, {'value': '00000530', 'count': 58271}]}, {'name': 'etcdescription', 'type': 'VARCHAR(255)', 'nullable': True, 'is_pk': False, 'is_fk': False, 'description': {'english': 'etcdescription provides the description of the group within the Enhanced Therapeutic Class (ETC).', 'spanish': 'etcdescription proporciona la descripción del grupo dentro de la Enhanced Therapeutic Class (ETC).'}, 'link_to': [], 'link_from': [], 'range': {}, 'distinct_values': [{'count': 1205}], 'most_frequent_values': [{'value': 'Antihyperlipidemic - HMG CoA Reductase Inhibitors (statins)', 'count': 102285}, {'value': 'Gastric Acid Secretion Reducing Agents - Proton Pump Inhibitors (PPIs)', 'count': 93308}, {'value': 'Salicylate Analgesics', 'count': 87881}, {'value': 'Platelet Aggregation Inhibitors - Salicylates', 'count': 87178}, {'value': 'Vitamins - D Derivatives', 'count': 69988}, {'value': 'Beta Blockers Cardiac Selective', 'count': 68528}, {'value': 'Benzodiazepines', 'count': 63188}, {'value': 'Antianxiety Agent - Benzodiazepines', 'count': 61048}, {'value': 'Analgesic Opioid Agonists', 'count': 60904}, {'value': 'Antidepressant - Selective Serotonin Reuptake Inhibitors (SSRIs)', 'count': 58271}]}]}}]\n\n            # Reglas del formato SQL:\n            \n        # Tu tarea principal es: Generación de un **Log de Eventos Hospitalarios** en formato de script SQL compatible con el dialecto PostgreSQL,\n          siguiendo las reglas siguientes:\n\n        ## 0. Reglas básicas:\n        - Tu único conocimiento es sobre la base de datos corporativa mediante el contexto del esquema proporcionado.\n        - Contesta únicamente con el código SQL sin ningún comentario adicional.\n        - No incluyas comentarios de cortesía o despedida. Eres un generador de código.\n        - Asegura no generar campos o tablas inexistentes en el contexto de la base de datos proporcionado.\n        - Si el usuario no tiene claro el objetivo, y pide algo parecido a \"dame un log de eventos de los pacientes que han llegado a Urgencias\",\n          intenta generar un log de eventos con todos los `id` posibles en el contexto recuperado, infiere eventos que dispongan de 'timestamps' en sus tablas y añade como atributos todas las columnas restantes de las mismas.\n        \n        ## 1. Identificadores únicos. (obligatorio)\n        - Incorpora los identificadores únicos al principio del script manteniendo su nombre original.\n        - Estos identificadores permiten reconocer de forma inequívoca cada instancia del proceso (p. ej., un paciente o una estancia).\n\n        ## 2. Marca temporal. (obligatorio)\n        - Registra el momento exacto en que sucede cada evento.\n        - Formato fecha `timestamp` (`YYYY-MM-DD HH:MM:SS`).\n        - Mapea la columna original a **`timestamps`**.\n\n        ## 3. Nombre del evento. (obligatorio)\n        - Describe la actividad realizada (p. ej., *Admisión del paciente*, *Alta del paciente*, *Inicio de intervención*).\n        - Mapea la columna original a **`activity`**.\n        - Si el usuario repite el nombre de un evento, añade sufijo numérico para diferenciarlos.\n        - Si el usuario no te da un valor exacto para su nombre, usa el nombre de la actividad que mejor se ajuste.\n        - Es necesario que el evento solicitado presente una marca temporal, ya sea una columna: \"Fecha Hora\", \"Fecha\"+\"Hora\".\n        - Algunos eventos especiales pueden requerir una reconstrucción atípica, \n          que involucran cálculos o uniones de varias tablas, dichos casos se especifican en el contexto de la base de datos.\n\n        ## 4. Atributos adicionales *(opcionales)*\n        - Añade columnas con la información complementaria relevante para el análisis (p. ej., *nivel de triaje*, *código diagnóstico*, *Laboratorio*, ...).\n        - Los atributos que se usan en algún evento, deben replicarse en el resto de eventos con valor `NULL`, para garantizar el buen funcionamiento de las operaciones `UNION ALL`.\n        - En cada bloque **CTE** (`WITH`) mantén el mismo alias con el nombre exacto original que en la base de datos.\n        - Si alguna columna de atributos se repite en nombre y en tipo de datos, utiliza el mismo nombre original y comparten tipo de datos aprovecha la misma columna.\n\n        ## 5. Reglas de formato e integridad del script SQL\n        - Ajusta el dialecto al motor de base de datos.\n        - Utiliza **CTEs** (`WITH`) para descomponer el script en bloques sencillos, claros y reutilizables: bloques de eventos (p. ej., admisiones, altas, medicaciones), operaciones auxiliares, validaciones, etc.\n        - Utiliza **CTEs** (`WITH`) adicionales al principio del script si hay validaciones de datos o filtros que afecten a toda una tabla.\n        - La última **CTE** ('WITH`) debe ser una operación **`UNION ALL`** para formar el log de eventos final.\n        - Especifica el esquema de la base de datos en las operaciones `FROM` y `JOIN`.\n        - Orden de columnas en las CTE y en el `UNION ALL` final:\n            1. Columnas con los identificadores únicos siempre al principio.\n            2. `timestamps`\n            3. `activity`\n            4. Columnas de Atributos adicionales.\n        - Si algún atributo tiene secuencia, NO limites al primer elemento, a no ser que lo especifique el usuario. (ojo con el uso de JOIN o LEFT JOIN si es necesario repetir eventos para mantener la secuencia.)\n        - Cuando un atributo no aplique a un evento, rellénalo con `NULL`.\n        - Mantén la integridad de los tipos de datos originales en todo el script, mediante EXPLICIT CASTS.\n        - Usa los EXPLICIT CASTS óptimos para el dialecto SQL utilizado. (por ejemplo, '1234'::INTEGER en PostgreSQL o `CAST(column_name AS DATE)` en otros dialectos.)\n        - Para las relaciones entre tablas usa tiempre nomenclatura estándar de SQL tipo `FROM <A>.<B> <C> <JOIN'S> <ON> <CONDITIONS>`.\n        - Usa siempre los nombres originales de las columnas salvo los mapeos indicados de `timestamps` y `activity`, o los mapeos que indique el usuario.\n        - Tabula el script SQL para facilitar la lectura de los bloques `CTE`, operaciones `CAST`.\n        - Concluye siempre el script con **`SELECT * FROM (…) ORDER BY timestamps ASC;`** al final del script a no ser que el usuario especifique otro orden.\n       \n        ## 6. Ejemplo de output del script SQL.\n\n        | <columna id1> | <columna id2> | timestamps          | activity   | <columna atributo1> | <columna atributo2> | … |,\n        |---------------|---------------|---------------------|------------|---------------------|---------------------|---|,\n        | 12345         | 21231         | 2025-04-18T08:30:00 | Llegada    | 2                   | NULL                | … |,\n        | 12345         | 21231         | 2025-04-19T09:25:00 | Alta       | NULL                | B34.9               | … |,\n\n        \n            \n\n            # Script SQL generado para satisfacer las necesidades del usuario:\n            #################################\n            ```sql\nWITH\ncte_arrival AS (\n    SELECT\n        ed.subject_id,\n        ed.hadm_id,\n        ed.stay_id,\n        ed.intime                                      AS timestamps,\n        'Llegada a Urgencias (ED)'                     AS activity,\n        ed.arrival_transport                           AS arrival_transport,\n        ed.gender                                      AS gender,\n        ed.race                                        AS race,\n        NULL::VARCHAR(255)                             AS disposition,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title,\n        NULL::INTEGER                                  AS diagnosis_seq_num\n    FROM module_ed.edstays ed\n),\ncte_triage AS (\n    SELECT\n        tr.subject_id,\n        ed.hadm_id,\n        tr.stay_id,\n        (ed.intime + INTERVAL '1 second')              AS timestamps,\n        'Triaje en Urgencias (ED)'                     AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(60)                              AS race,\n        NULL::VARCHAR(255)                             AS disposition,\n        tr.temperature                                 AS temperature,\n        tr.heartrate                                   AS heartrate,\n        tr.resprate                                    AS resprate,\n        tr.o2sat                                       AS o2sat,\n        tr.sbp::INTEGER                                AS sbp,\n        tr.dbp::INTEGER                                AS dbp,\n        tr.pain                                        AS pain,\n        tr.acuity                                      AS acuity,\n        tr.chiefcomplaint                              AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title,\n        NULL::INTEGER                                  AS diagnosis_seq_num\n    FROM module_ed.triage tr\n    JOIN module_ed.edstays ed\n      ON tr.stay_id = ed.stay_id\n),\ncte_vitalsign AS (\n    SELECT\n        vs.subject_id,\n        ed.hadm_id,\n        vs.stay_id,\n        vs.charttime                                  AS timestamps,\n        'Toma de Constantes Vitales'                  AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(60)                              AS race,\n        NULL::VARCHAR(255)                             AS disposition,\n        vs.temperature                                 AS temperature,\n        vs.heartrate                                   AS heartrate,\n        vs.resprate                                    AS resprate,\n        vs.o2sat                                       AS o2sat,\n        vs.sbp                                         AS sbp,\n        vs.dbp                                         AS dbp,\n        vs.pain                                        AS pain,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title,\n        NULL::INTEGER                                  AS diagnosis_seq_num\n    FROM module_ed.vitalsign vs\n    JOIN module_ed.edstays ed\n      ON vs.stay_id = ed.stay_id\n),\ncte_medrecon AS (\n    SELECT\n        mr.subject_id,\n        ed.hadm_id,\n        mr.stay_id,\n        mr.charttime                                  AS timestamps,\n        'Conciliación de Medicamentos'                AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(60)                              AS race,\n        NULL::VARCHAR(255)                             AS disposition,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        mr.name                                        AS medrecon_name,\n        mr.gsn                                         AS medrecon_gsn,\n        mr.ndc                                         AS medrecon_ndc,\n        mr.etccode                                     AS medrecon_etccode,\n        mr.etcdescription                              AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title,\n        NULL::INTEGER                                  AS diagnosis_seq_num\n    FROM module_ed.medrecon mr\n    JOIN module_ed.edstays ed\n      ON mr.stay_id = ed.stay_id\n),\ncte_pyxis AS (\n    SELECT\n        px.subject_id,\n        ed.hadm_id,\n        px.stay_id,\n        px.charttime                                  AS timestamps,\n        'Dispensación de Medicamentos'                AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(60)                              AS race,\n        NULL::VARCHAR(255)                             AS disposition,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        px.name                                        AS pyxis_name,\n        px.gsn                                         AS pyxis_gsn,\n        px.med_rn                                      AS pyxis_med_rn,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title,\n        NULL::INTEGER                                  AS diagnosis_seq_num\n    FROM module_ed.pyxis px\n    JOIN module_ed.edstays ed\n      ON px.stay_id = ed.stay_id\n),\ncte_diagnosis AS (\n    SELECT\n        dg.subject_id,\n        ed.hadm_id,\n        dg.stay_id,\n        ed.outtime                                   AS timestamps,\n        CONCAT('Alta de Urgencias (ED) ', dg.seq_num) AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(60)                              AS race,\n        ed.disposition                                AS disposition,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        dg.icd_code                                   AS diagnosis_icd_code,\n        dg.icd_version                                AS diagnosis_icd_version,\n        dg.icd_title                                  AS diagnosis_icd_title,\n        dg.seq_num                                    AS diagnosis_seq_num\n    FROM module_ed.diagnosis dg\n    JOIN module_ed.edstays ed\n      ON dg.stay_id = ed.stay_id\n),\nfinal_log AS (\n    SELECT * FROM cte_arrival\n    UNION ALL\n    SELECT * FROM cte_triage\n    UNION ALL\n    SELECT * FROM cte_vitalsign\n    UNION ALL\n    SELECT * FROM cte_medrecon\n    UNION ALL\n    SELECT * FROM cte_pyxis\n    UNION ALL\n    SELECT * FROM cte_diagnosis\n)\nSELECT *\nFROM final_log\nORDER BY timestamps ASC;\n```\n\n            # Objetivo\n            #################################\n            En base a:\n            - las necesidades del usuario.\n            - conocimiento de la base de datos corporativa.\n            - formato del script SQL.\n            - el primer script SQL generado.\n\n            Revisa en busca de inconsistencias y errores en el script SQL generado.\n            - Garantiza el formato del script SQL.\n            - Corrige errores de sintaxis SQL.\n            - Revisa minuciosamente el apartado de validación de datos, para aplicar los filtros solicitados por el usuario.\n            - Revisa minuciosamente que los campos en los bloques `CTEs` (`WITH`) sean consistentes para la ejecución de la consulta final con los `UNION ALL`.\n            - Revisa minuciosamente que las operaciones `CAST` estén presentes, sean consistentes y correctas para el dialecto SQL utilizado.\n            - Revisa que se respete las operaciones de ordenación especificadas en el contexto.\n            - Elimina campos que no haya pedido el usuario.\n            - Elimina campos que no se puedan encontrar en el contexto de la base de datos (incluyendo emparejamientos forzados).\n            - Garantiza que los alias de las columnas, sean los nombres originales de las columnas del contexto de la base de datos.\n\n            Explica al usuario el contexto del script SQL generado:\n            - Comenta todos los bloques de eventos según el contexto de la base de datos.\n            - Comenta todos los campos individuales que lo componen,según contexto de la base de datos. (unidad, significado, etc.) (si comparten columna con otro evento, comenta ambos en la misma línea)\n            - Indica siempre al principio del script (con: `--` no: `/**/`) los campos y eventos que *NO* se han podido encontrar.\n            \n            # Output:\n            #################################\n            - Script SQL corregido y mejorado.\n            ",
  "sql_script_enhanced": "-- Campos/Eventos no incluidos por falta de esquema:  \n--   • Pruebas de Laboratorio (no se encontró tabla en el módulo ED)  \n--   • Pruebas Radiológicas (no se encontró tabla en el módulo ED)  \n\nWITH\n-- CTE de llegada del paciente a Urgencias (ED).  \n-- Fuente: module_ed.edstays  \n-- subject_id         IDENTIFICADOR único de paciente  \n-- hadm_id            Identificador de hospitalización tras ED  \n-- stay_id            Identificador de estancia en Urgencias  \n-- intime → timestamps  Fecha/hora de ingreso a ED  \n-- activity           'Llegada a Urgencias (ED)'  \n-- arrival_transport  Medio de llegada (WALK IN, AMBULANCE, …)  \n-- gender             Género administrativo del paciente  \ncte_arrival AS (\n    SELECT\n        ed.subject_id,\n        ed.hadm_id,\n        ed.stay_id,\n        ed.intime                                       AS timestamps,\n        'Llegada a Urgencias (ED)'                      AS activity,\n        ed.arrival_transport                            AS arrival_transport,\n        ed.gender                                       AS gender,\n        NULL::VARCHAR(255)                              AS disposition,\n        NULL::NUMERIC                                   AS acuity,\n        NULL::NUMERIC                                   AS temperature,\n        NULL::NUMERIC                                   AS heartrate,\n        NULL::NUMERIC(10,4)                             AS resprate,\n        NULL::NUMERIC                                   AS o2sat,\n        NULL::INTEGER                                   AS sbp,\n        NULL::INTEGER                                   AS dbp,\n        NULL::VARCHAR                                   AS pain,\n        NULL::VARCHAR(255)                              AS chiefcomplaint,\n        NULL::VARCHAR(255)                              AS medrecon_name,\n        NULL::VARCHAR(10)                               AS medrecon_gsn,\n        NULL::VARCHAR(12)                               AS medrecon_ndc,\n        NULL::VARCHAR(8)                                AS medrecon_etccode,\n        NULL::VARCHAR(255)                              AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                              AS pyxis_name,\n        NULL::VARCHAR(10)                               AS pyxis_gsn,\n        NULL::SMALLINT                                  AS pyxis_med_rn,\n        NULL::INTEGER                                   AS diagnosis_seq_num,\n        NULL::VARCHAR(8)                                AS diagnosis_icd_code,\n        NULL::SMALLINT                                  AS diagnosis_icd_version,\n        NULL::VARCHAR                                   AS diagnosis_icd_title\n    FROM module_ed.edstays ed\n),\n\n-- CTE de triaje en Urgencias (ED).  \n-- Fuente: module_ed.triage + edstays  \n-- (ed.intime + 1s) → timestamps  \n-- activity           'Triaje en Urgencias (ED)'  \n-- acuity             Nivel de triaje (1–5)  \n-- temperature, heartrate, resprate, o2sat, sbp, dbp, pain → signos vitales recogidos en triaje  \n-- chiefcomplaint     Texto libre de queja principal  \ncte_triage AS (\n    SELECT\n        tr.subject_id,\n        ed.hadm_id,\n        tr.stay_id,\n        (ed.intime + INTERVAL '1 second')               AS timestamps,\n        'Triaje en Urgencias (ED)'                      AS activity,\n        NULL::VARCHAR(50)                               AS arrival_transport,\n        NULL::VARCHAR(1)                                AS gender,\n        NULL::VARCHAR(255)                              AS disposition,\n        tr.acuity                                      AS acuity,\n        tr.temperature                                 AS temperature,\n        tr.heartrate                                   AS heartrate,\n        tr.resprate                                    AS resprate,\n        tr.o2sat                                       AS o2sat,\n        tr.sbp::INTEGER                                AS sbp,\n        tr.dbp::INTEGER                                AS dbp,\n        tr.pain                                        AS pain,\n        tr.chiefcomplaint                              AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::INTEGER                                  AS diagnosis_seq_num,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title\n    FROM module_ed.triage tr\n    JOIN module_ed.edstays ed\n      ON tr.stay_id = ed.stay_id\n),\n\n-- CTE de toma de constantes vitales.  \n-- Fuente: module_ed.vitalsign + edstays  \n-- charttime → timestamps  \n-- activity           'Toma de Constantes Vitales'  \n-- temperature, heartrate, resprate, o2sat, sbp, dbp, pain → todas las tomas  \ncte_vitalsign AS (\n    SELECT\n        vs.subject_id,\n        ed.hadm_id,\n        vs.stay_id,\n        vs.charttime                                   AS timestamps,\n        'Toma de Constantes Vitales'                   AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(255)                             AS disposition,\n        NULL::NUMERIC                                  AS acuity,\n        vs.temperature                                 AS temperature,\n        vs.heartrate                                   AS heartrate,\n        vs.resprate                                    AS resprate,\n        vs.o2sat                                       AS o2sat,\n        vs.sbp                                         AS sbp,\n        vs.dbp                                         AS dbp,\n        vs.pain                                        AS pain,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::INTEGER                                  AS diagnosis_seq_num,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title\n    FROM module_ed.vitalsign vs\n    JOIN module_ed.edstays ed\n      ON vs.stay_id = ed.stay_id\n),\n\n-- CTE de conciliación de medicamentos.  \n-- Fuente: module_ed.medrecon + edstays  \n-- charttime → timestamps  \n-- activity           'Conciliación de Medicamentos'  \n-- name, gsn, ndc, etccode, etcdescription → campos de conciliación  \ncte_medrecon AS (\n    SELECT\n        mr.subject_id,\n        ed.hadm_id,\n        mr.stay_id,\n        mr.charttime                                   AS timestamps,\n        'Conciliación de Medicamentos'                 AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(255)                             AS disposition,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        mr.name                                        AS medrecon_name,\n        mr.gsn                                         AS medrecon_gsn,\n        mr.ndc                                         AS medrecon_ndc,\n        mr.etccode                                     AS medrecon_etccode,\n        mr.etcdescription                              AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        NULL::INTEGER                                  AS diagnosis_seq_num,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title\n    FROM module_ed.medrecon mr\n    JOIN module_ed.edstays ed\n      ON mr.stay_id = ed.stay_id\n),\n\n-- CTE de dispensación de medicamentos por Pyxis.  \n-- Fuente: module_ed.pyxis + edstays  \n-- charttime → timestamps  \n-- activity           'Dispensación de Medicamentos'  \n-- name, gsn, med_rn → datos de dispensación  \ncte_pyxis AS (\n    SELECT\n        px.subject_id,\n        ed.hadm_id,\n        px.stay_id,\n        px.charttime                                   AS timestamps,\n        'Dispensación de Medicamentos'                 AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        NULL::VARCHAR(255)                             AS disposition,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        px.name                                        AS pyxis_name,\n        px.gsn                                         AS pyxis_gsn,\n        px.med_rn                                      AS pyxis_med_rn,\n        NULL::INTEGER                                  AS diagnosis_seq_num,\n        NULL::VARCHAR(8)                               AS diagnosis_icd_code,\n        NULL::SMALLINT                                 AS diagnosis_icd_version,\n        NULL::VARCHAR                                  AS diagnosis_icd_title\n    FROM module_ed.pyxis px\n    JOIN module_ed.edstays ed\n      ON px.stay_id = ed.stay_id\n),\n\n-- CTE de alta del paciente (Salida de Urgencias) con diagnósticos.  \n-- Fuente: module_ed.edstays + module_ed.diagnosis  \n-- outtime → timestamps  \n-- activity           'Salida de Urgencias (ED)'  \n-- disposition        Motivo de alta de ED  \n-- dg.seq_num, dg.icd_code, dg.icd_version, dg.icd_title → diagnósticos facturados  \ncte_discharge AS (\n    SELECT\n        ed.subject_id,\n        ed.hadm_id,\n        ed.stay_id,\n        ed.outtime                                     AS timestamps,\n        'Salida de Urgencias (ED)'                     AS activity,\n        NULL::VARCHAR(50)                              AS arrival_transport,\n        NULL::VARCHAR(1)                               AS gender,\n        ed.disposition                                 AS disposition,\n        NULL::NUMERIC                                  AS acuity,\n        NULL::NUMERIC                                  AS temperature,\n        NULL::NUMERIC                                  AS heartrate,\n        NULL::NUMERIC(10,4)                            AS resprate,\n        NULL::NUMERIC                                  AS o2sat,\n        NULL::INTEGER                                  AS sbp,\n        NULL::INTEGER                                  AS dbp,\n        NULL::VARCHAR                                  AS pain,\n        NULL::VARCHAR(255)                             AS chiefcomplaint,\n        NULL::VARCHAR(255)                             AS medrecon_name,\n        NULL::VARCHAR(10)                              AS medrecon_gsn,\n        NULL::VARCHAR(12)                              AS medrecon_ndc,\n        NULL::VARCHAR(8)                               AS medrecon_etccode,\n        NULL::VARCHAR(255)                             AS medrecon_etcdescription,\n        NULL::VARCHAR(255)                             AS pyxis_name,\n        NULL::VARCHAR(10)                              AS pyxis_gsn,\n        NULL::SMALLINT                                 AS pyxis_med_rn,\n        dg.seq_num                                     AS diagnosis_seq_num,\n        dg.icd_code                                    AS diagnosis_icd_code,\n        dg.icd_version                                 AS diagnosis_icd_version,\n        dg.icd_title                                   AS diagnosis_icd_title\n    FROM module_ed.edstays ed\n    LEFT JOIN module_ed.diagnosis dg\n      ON ed.stay_id = dg.stay_id\n),\n\n-- Unión de todos los eventos en un solo log  \nfinal_log AS (\n    SELECT * FROM cte_arrival\n    UNION ALL\n    SELECT * FROM cte_triage\n    UNION ALL\n    SELECT * FROM cte_vitalsign\n    UNION ALL\n    SELECT * FROM cte_medrecon\n    UNION ALL\n    SELECT * FROM cte_pyxis\n    UNION ALL\n    SELECT * FROM cte_discharge\n)\n\nSELECT *\nFROM final_log\nORDER BY subject_id ASC, timestamps ASC;"
}